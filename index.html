<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>GF-based speech grammars</title>
<meta name="Author" content="Kaarel Kaljurand"/>

<!--
<script type="text/javascript"
src="http://kaljurand.github.com/toc.js/toc.js"></script>
-->

<style type="text/css">
h1, h2, h3 { font-family: sans-serif }
pre { padding: 1em 1em 1em 1em; color: inherit; background-color: #eee; border: 1px solid silver }
body { font-family: serif; margin: 1em 1em 1em 1em; }
address { border-top: 1px solid black; margin-top: 2em; padding-top: 0.5em }
tbody tr:nth-child(even) td { background-color: #eff1f3 }
td { border: 1px solid black; padding: 0.3em 0.3em 0.3em 0.3em }
table { empty-cells: show; border-collapse: collapse; margin-left: 1em }
thead { font-weight: bold; background-color: silver; font-variant: small-caps }
td { vertical-align: top }
.wip { border: red 2px dotted; padding: 1em 1em 1em 1em }
a { text-decoration: none }
a:hover { text-decoration: underline }
</style>
</head>

<!--
<body onload="toc(1, true)">
-->
<body>

<h1>GF-based speech grammars</h1>

<h2>Introduction</h2>

<p>The grammars that are available on this page cover some fixed domains (e.g.
calculator, maps, alarm clock) and
define two kinds of languages for talking about these domains:</p>

<ul>
<li>natural (spoken) languages, currently Estonian (<em>Est</em>) and English
(<em>Eng</em>);</li>
<li>machine languages, currently a single language <em>App</em>.</li>
</ul>

<p>The syntax of the natural languages is designed to reflect the common
ways of expressing the sentences of the domains. Furthermore, it mimics spoken
language (e.g. the syntax does not describe any orthographic symbols or
conventions).</p>
<p>The language <em>App</em> has the following properties:</p>

<ul>
<li>its syntax is neutral to any natural language, although is uses some
English keywords;</li>
<li>its sentences are never ambiguous;</li>
<li>its sentences can be evaluated by machines such as
a standard calculator, Google Maps search box, WolframAlpha search box,
etc.</li>
</ul>

<p>The grammars are implemented in
<a href="http://www.grammaticalframework.org/">Grammatical Framework (GF)</a>,
a formalism that supports precise translation between the
languages. For example, we can automatically translate the English</p>

<blockquote>
<em>how much is two liters in cubic centi meters</em>
</blockquote>

<p>to Estonian and <em>App</em>:</p>

<blockquote>
<p><em>kui palju on kaks liitrit kuup senti meetrites</em></p>
<p><em>convert 2 L to cm^3</em></p>
</blockquote>

<p>The last form can be directly evaluated by resolving e.g. the URL</p>
<blockquote>
<a href="http://www.wolframalpha.com/input/?i=convert+2+L+to+cm^3">http://www.wolframalpha.com/input/?i=convert+2+L+to+cm^3</a>
</blockquote>


<h2>Grammars</h2>

<p>The grammars are listed in the following table where the
columns stand for:</p>

<ol>
<li>name of the grammar;</li>
<li>short description;</li>
<li>supported natural languages (note that
every grammar also contains the <em>App</em>-language);</li>
<li>random-generated example sentences (which often do not
agree with common sense but still convey some
idea of what is syntactically possible in the described languages);</li>
<li>link to a compiled/portable grammar file.</li>
</ol>

<table>
<thead>
<tr>
<td>Name</td>
<td>Description</td>
<td>Languages</td>
<td>Examples</td>
<td>PGF</td>
</tr>
</thead>
<tbody>
<tr>
<td>Action</td>
<td>Union of Alarm, Calc, Dial, Direction, and Weather</td>
<td>Est,Eng</td>
<td><a href="grammars/gr/Action.txt">txt</a></td>
<td><a href="grammars/pgf/Action.pgf">pgf</a></td>
</tr>

<tr>
<td>Alarm</td>
<td>Simple 24h-clock, e.g. "set alarm to fourteen fifty seven"</td>
<td>Est,Eng</td>
<td><a href="grammars/gr/Alarm.txt">txt</a></td>
<td><a href="grammars/pgf/Alarm.pgf">pgf</a></td>
</tr>

<tr>
<td>Calc</td>
<td>Union of ArithExpr and Unitconv</td>
<td>Est,Eng</td>
<td><a href="grammars/gr/Calc.txt">txt</a></td>
<td><a href="grammars/pgf/Calc.pgf">pgf</a></td>
</tr>

<tr>
<td>Dial</td>
<td>Sequence of digits forming a phone number</td>
<td>Est,Eng</td>
<td><a href="grammars/gr/Dial.txt">txt</a></td>
<td><a href="grammars/pgf/Dial.pgf">pgf</a></td>
</tr>

<tr>
<td>Direction</td>
<td>FROM-TO queries over Estonian place names (e.g. "Pariisi")
and the street addresses of Tallinn and Tartu (e.g. "Lossi plats kaks")</td>
<td>Est</td>
<td><a href="grammars/gr/Direction.txt">txt</a></td>
<td><a href="grammars/pgf/Direction.pgf">pgf</a></td>
</tr>

<tr>
<td>Estvrp</td>
<td>Estonian vehicle registration plate language, e.g. "ABC 123"</td>
<td>Est</td>
<td><a href="grammars/gr/Estvrp.txt">txt</a></td>
<td><a href="grammars/pgf/Estvrp.pgf">pgf</a></td>
</tr>

<tr>
<td>ArithExpr</td>
<td>Arithmetical expressions, e.g.
<a href="http://www.google.com/search?q=1%2B-2.3*PI^5)">1 + -2.3 * PI ^ 5</a></td>
<td>Est,Eng</td>
<td><a href="grammars/gr/ArithExpr.txt">txt</a></td>
<td><a href="grammars/pgf/ArithExpr.pgf">pgf</a></td>
</tr>

<tr>
<td>Go</td>
<td>Tiny example grammar</td>
<td>Est,Eng</td>
<td><a href="grammars/gr/Go.txt">txt</a></td>
<td><a href="grammars/pgf/Go.pgf">pgf</a></td>
</tr>

<tr>
<td>Symbols</td>
<td>Arbitrary length sequence of digits and Estonian letters</td>
<td>Est</td>
<td><a href="grammars/gr/Symbols.txt">txt</a></td>
<td><a href="grammars/pgf/Symbols.pgf">pgf</a></td>
</tr>

<tr>
<td>Tallinndirection</td>
<td>FROM-TO queries over Tallinn's street addresses</td>
<td>Est</td>
<td><a href="grammars/gr/Tallinndirection.txt">txt</a></td>
<td><a href="grammars/pgf/Tallinndirection.pgf">pgf</a></td>
</tr>

<tr>
<td>Unitconv</td>
<td>Unit conversion expressions, e.g.
<a href="http://www.google.com/search?q=12.34+km^2+IN+ft^2">12.34 km^2 in ft^2</a></td>
<td>Est,Eng</td>
<td><a href="grammars/gr/Unitconv.txt">txt</a></td>
<td><a href="grammars/pgf/Unitconv.pgf">pgf</a></td>
</tr>

<tr>
<td>Weather</td>
<td>Weather queries with Estonian place names (e.g.
Est: "Lasila ilmateade";
App: <a href="http://www.google.com/search?q=weather+Lasila%2C+Estonia">weather Lasila, Estonia</a>)</td>
<td>Est</td>
<td><a href="grammars/gr/Weather.txt">txt</a></td>
<td></td>
</tr>
</tbody>
</table>

<p>Note that the examples only list one form for each example. The <em>App</em>
sentences typically do not have more forms anyway, but the natural languages
do contain some variation, e.g. articles can be dropped or requests can be
optionally prefixed by "please".</p>

<p>All the grammars are modular, e.g. <em>Calc</em> is a union of
<em>ArithExpr</em> and <em>Unitconv</em>.
The above table lists mostly the higher-level grammars.
The module import-hierarchy of the <em>Action</em>-grammar is displayed
below.</p>

<div class="image">
<img src="images/Action.png"
alt="Abstract grammar component hierarchy for the Action-grammar"/>
</div>


<h2>Usage</h2>

<p>The grammars can be downloaded in the (binary) PGF-format. This format
can be embedded into applications (using existing GF libraries for various programming
languages) or it
can be opened by the GF commandline tool and converted into other formats
(e.g. JSGF, Javascript, ...). The example sentences of the introduction were
produced with this Unix+GF commandline:</p>

<pre>
echo 'p -lang=Eng "how much is two liters in cubic centi meters" | l -lang=Est,App -bind' |\
gf --run Action.pgf
</pre>

<p>Usage in applications:</p>

<ul>
<li>the Android speech recognition service
<a href="http://kaljurand.github.io/K6nele/about/">Kõnele</a> references some of the grammars,
making them available to Android apps;</li>
<li>the Android voice actions app
<a href="http://kaljurand.github.io/Arvutaja/">Arvutaja</a> is based on the
Action-grammar;</li>
<li>the web app <a href="https://touchless-timer.appspot.com">Touchless Timer</a> (source: <a href="https://github.com/Kaljurand/touchless-timer">https://github.com/Kaljurand/touchless-timer</a>)
is based on the Alarm-grammar (converted into Javascript).</li>
</ul>


<h2>Source code</h2>
<p>The source code of all the grammars is available at
<a href="https://github.com/Kaljurand/Grammars/">http://github.com/Kaljurand/Grammars/</a>.
The PGF files have been generated based on
<a href="https://github.com/Kaljurand/Grammars/commit/aa674f7770b6223509a212cf9360addf25cfbb57">this commit</a>.</p>


<h2>Contributing</h2>

<p>Everybody is welcome to contribute grammars to this project provided
that the grammar is made available as open source. If you would like
to contribute a grammar please proceed as follows</p>

<ol>
<li>fork the
<a href="https://github.com/Kaljurand/Grammars/">Grammars-project</a>
on GitHub,</li>
<li>create a new branch in your fork,</li>
<li>add your grammar in this branch, and</li>
<li>submit the branch via a pull request.</li>
</ol>

<p>Read more about <a href="https://help.github.com/articles/using-pull-requests/">
using pull requests</a>.</p>


<h2>Publications</h2>

<ul>
<li>Kaarel Kaljurand, Tanel Alumäe
<em>Controlled Natural Language in Speech Recognition Based User Interfaces</em> at <a href="http://attempto.ifi.uzh.ch/site/cnl2012/">CNL 2012</a>
<ul>
<li><a href="files/cnl2012_speech.pdf">preprint (PDF)</a>
(the final publication is available at
<a href="http://link.springer.com/chapter/10.1007/978-3-642-32612-7_6">link.springer.com</a>)</li>
<li><a href="files/cnl2012_speech_slides/index.html">slides of the presentation (HTML)</a></li>
</ul>
</li>
<li>Kaarel Kaljurand <em>Building Speech-based User Interfaces with GF</em> at <a href="http://school.grammaticalframework.org/2013/">GF Summer School 2013</a>
<ul>
<li><a href="files/gfss2013/gfss2013_kaljurand.html">slides of the presentation (HTML)</a></li>
</ul>
</li>
</ul>

<address>
Kaarel Kaljurand (kaljurand@gmail.com),
2014-07-01
</address>

</body>
</html>
